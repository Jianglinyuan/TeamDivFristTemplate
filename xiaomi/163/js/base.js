requirejs.config({baseUrl:G.url+G.ver+"/js/",paths:{jquery:"http://mimg.127.net/p/tools/jquery/jquery-1.11.0.min",pro:"http://mimg.127.net/p/tools/pro/pro-1.3.5.min",jqureyui:G.url+"lib/jqui/jquery-ui-1.10.4.custom.min",jqureyzh:G.url+"lib/jqui/jquery.ui.datepicker-zh-CN",jqureyzclip:G.url+"lib/js/jquery.zclip.min","plugin-hd":G.url+"hd/",polyline:G.url+"lib/js/polyline.min"},shim:{jquery:{exports:"$"}}}),define("base",function(){}),define("component/base",["require","exports","module","pro"],function(e,t){var n=e("pro");n.Component={};var r=n.Component.Base=n.View.extend(function(e){e=e||{};var t=this.constructor;this.model.set({className:e.className,subclass:e.subclass,style:e.style,attr:e.attr,disabled:!!e.disabled}),"onclick"in e&&this.listen("click",e.onclick),this.listen("disable",function(){this.dom.setAttribute("disabled","disabled"),this.addClass(t.getClassName("disabled")),this.model.set("disabled",!0)}),this.listen("resume",function(){this.dom.removeAttribute("disabled"),this.removeClass(t.getClassName("disabled")),this.model.set("disabled",!1)}),this.listen("create",function(e){var t=this.model.get();t.className&&this.addClass(t.className),t.subclass&&this.addClass(this.constructor.getClassName(t.subclass));if(t.style){var n="";if(typeof t.style=="string")n=t.style;else for(var r in t.style)n+=r+":"+t.style[r]+";";e.style.cssText+=(/;$/.test(e.style.cssText)||!e.style.cssText?"":";")+n}if(t.attr)for(var r in t.attr)e.setAttribute(r,t.attr[r])}),this.listen("render",function(){this.model.get("disabled")&&this.disable()})},{_events:{"@":"click"},Model:n.Model,getClassName:function(e){var t=this._baseClassName;if(t){var n=e.split(" ");for(var r=0,i=n.length;r<i;r++)n[r]=t+"-"+n[r];return n.join(" ")}return""}});return r}),define("component/button",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Button=n.extend(function(e){var t=this.constructor;this.__hoverClass=t.getClassName("hover"),this.model.set({_tag:e.href?"a":"button",text:e.text||"",href:e.href,target:e.target}),this.model.get("href")&&(this.listen("disable",function(){this.dom.removeAttribute("href"),this.dom.removeAttribute("target")}),this.listen("resume",function(){this.dom.href=this.model.get("href"),this.dom.target=this.model.get("target")})),this.listen("create",function(e){this.model.get("href")&&(e.href=this.model.get("href"),this.model.get("target")&&(e.target=this.model.get("target")))})},{_baseClassName:"w-button",_template:'<{{_tag}} class="w-button"><span>{{{text}}}</span></{{_tag}}>',_events:{"@":"click","@/mouseover":function(){this.addClass(this.__hoverClass)},"@/mouseout":function(){this.removeClass(this.__hoverClass)}}},{click:function(){this.fire("click")}});return r}),define("module/cart/minicartview",["require","pro","component/button"],function(e){function i(){var e=this;this.listen("create",function(){this.listenDoms({"@":function(){e.fire("click")},"@/mouseover":function(){e.fire("mouseover")},"@/mouseout":function(){e.fire("mouseout")}})}),this.listen("mouseover",function(){clearTimeout(this.__layerTimer),this.__layerTimer=t.delay(function(){this.showLayer()},this,500)}),this.listen("mouseout",function(){clearTimeout(this.__layerTimer),this.__layerTimer=t.delay(function(){this.layer&&this.layer.hide()},this,500)}),this.listen("update",function(){this.layer&&this.layer.show()})}function s(e){var t=this.constructor;this.bubble?this.bubble.update({text:e}):this.bubble=(new t.Bubble({text:e})).render(this.find("@btn"))}function o(){this.bubble&&(this.bubble.destroy(),delete this.bubble)}function u(){this.layer?this.layer.show():(this.layer=this.createLayer(),this.layer.render(this))}function a(){var e=this;return new r.Layer({model:this.model,events:{"@/mouseover":function(n,r){var i=!1,s=r.relatedTarget||r.fromElement||r.toElement;i=n===s||t.contains(n,s),!i&&e.fire("mouseover")},"@/mouseout":function(n,r){var i=!1,s=r.relatedTarget||r.fromElement||r.toElement;i=n===s||t.contains(n,s),!i&&e.fire("mouseout")}},listeners:{show:function(){e.dom.style.zIndex=999,e.fire("expand",this)},hide:function(){e.dom.style.zIndex=""},create:function(){e.dom.style.zIndex=999,e.fire("expandcreate",this)},render:function(){e.fire("expand",this)},goclick:function(){e.fire("goclick")}}})}function f(){this.layer&&this.layer.update()}function l(e,t){this.layer&&(this.layer.doms.count.innerHTML=e||0,this.layer.doms.total.innerHTML=t||0)}var t=e("pro"),n=e("component/button"),r=t.View.extend(i,{_html:'<div class="w-miniCart"></div>',_events:{"@btn":"click","@btn/mouseover":"mouseover","@btn/mouseout":"mouseout"},Bubble:t.View.extend({_template:'<b class="w-miniCart-count"><i class="ico ico-arrow-white-solid ico-arrow-white-solid-l"></i>{{text}}</b>',_getData:function(e){return{text:e.text}}}),Layer:t.View.extend({_template:'<div class="w-layer w-miniCart-layer">							{{#empty}}								<div class="w-miniCart-empty">您的清单中还没有任何商品</div>							{{/empty}}							{{^empty}}								<p class="w-miniCart-layer-title"><strong>最近加入的商品</strong></p>								<div class="w-miniCart-list" data-pro="entry"></div>								<div class="w-miniCart-layer-footer">									<p><strong>共有<b data-pro="count">{{count}}</b>件商品，金额总计：<em><span data-pro="total">{{total}}</span>夺宝币</em></strong></p>									<p><button data-pro="go" class="w-button w-button-main">查看清单并结算</button></p>								</div>							{{/empty}}						</div>',_entry:"@entry",_doms:{submit:"@submit",count:"@count",total:"@total"},_events:{"@go":"goclick"}}),Goods:t.View.extend({_template:'<div class="w-miniCart-item">							<div class="w-miniCart-item-pic"><img width="{{smallPic.width}}" height="{{smallPic.height}}" src="{{smallPic.url}}" onerror="this.src=\'http://mimg.127.net/p/yy/lib/img/products/s.png\'" alt="{{name}}" /></div>							<div class="w-miniCart-item-text">								<p><strong>{{name}}</strong></p>								<p>									<em>{{num}}夺宝币 × {{regularBuy}}期</em>									<a class="w-miniCart-item-del" href="javascript:void(0);" data-pro="del">删除</a>								</p>							</div>						</div>',_events:{"@del":function(e,n){this.fire("delclick"),t.cancelBubble(n)}}})},{showBubble:s,hideBubble:o,showLayer:u,createLayer:a,update:f,renderTotal:l});return r}),define("component/msgbox",["require","pro","component/base","component/button"],function(e){var t=e("pro"),n=e("component/base"),r=e("component/button"),i=t.Component.Msgbox=n.extend(function(e){e=e||{},i.current&&i.current.destroy(),this.listen("ok",e.onokclick||e.onok),this.listen("cancel",e.oncancelclick||e.oncancel),this.listen("close",e.oncloseclick||e.onclose),i.current=this,"width"in e&&this.listen("create",function(t){t.style.width=e.width+"px"})},{_getData:function(e){var t=!!(e.okText||e.onokclick||e.onok||e.ok)&&e.ok!==!1,n=!!(e.cancelText||e.oncancelclick||e.oncancel||e.cancel)&&e.cancel!==!1;return{header:e.header||"",title:e.title||"",text:e.text||"",ok:t,cancel:n,footer:e.footer,__hasFooter:!!(e.footer||t||n)}},_template:'<div class="w-msgbox">						<a data-pro="close" href="javascript:void(0);" class="w-msgbox-close">×</a>						<div class="w-msgbox-hd" data-pro="header">{{header}}</div>						<div class="w-msgbox-bd" data-pro="entry">{{#title}}<h2 class="w-msgbox-title">{{{title}}}</h2>{{/title}}{{{text}}}</div>						{{#__hasFooter}}							<div data-pro="footer" class="w-msgbox-ft">{{{footer}}}</div>						{{/__hasFooter}}					</div>',_events:{"@ok":"okclick","@cancel":"cancelclick","@close":"closeclick"},_listeners:{create:function(){var e=this,t=this.__config;this.entry=this.find("@entry"),this.header=this.find("@header"),this.footer=this.find("@footer"),this.footer&&(this.model.get("ok")&&(new r({subclass:"main",text:t.okText||"确定",onclick:function(){e.fire("okclick")}})).render(this.footer),this.model.get("cancel")&&(new r({subclass:"aside",text:t.cancelText||"取消",onclick:function(){e.fire("cancelclick")}})).render(this.footer)),this.mask=(new n({html:'<div class="w-mask"><iframe style="position:absolute;top:0;left:0;z-index:-1;filter:Alpha(Opacity=0);width:100%;height:100%" scrolling="no" frameborder="0"></iframe></div>'})).render(document.body).join(this)},render:function(){var e=this;this.center(),this.__onresize=t.bind(function(){this.center()},this),t.addEvent(window,"resize",this.__onresize)},destroy:function(){t.removeEvent(window,"resize",this.__onresize),i.current=null},okclick:function(){this.fire("ok")!==!1&&this.destroy()},closeclick:function(){this.fire("cancel")!==!1&&this.fire("close")!==!1&&this.destroy()},cancelclick:function(){this.fire("cancel")!==!1&&this.destroy()}},show:function(e){return(new this(e)).render(document.body)}},{center:function(){var e=this.dom,t=document.documentElement,n=e.offsetWidth,r=e.offsetHeight,i=t.clientWidth,s=t.clientHeight,o=t.scrollTop,u=t.scrollLeft;e.style.left=(i-n)/2+"px",e.style.top=(s-r)/2+"px";var a=this.mask;if(a&&a.dom.offsetHeight<s){var f=a.dom,l=t.scrollHeight;f.style.height=l+"px",e.style.top=e.offsetTop+t.scrollTop+"px"}else e.offsetTop<0?(e.style.position="absolute",e.style.top=t.scrollTop+document.body.scrollTop+"px"):e.offsetLeft+e.offsetWidth>i?(e.style.position="absolute",e.style.top=t.scrollTop+document.body.scrollTop+"px",e.style.left=t.scrollLeft+document.body.scrollLeft+"px"):e.style.position=""}});return i}),define("component/input",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Input=n.extend(function(e){e=e||{},"onkeypress"in e&&this.listen("keypress",e.onkeypress),"onkeydown"in e&&this.listen("keydown",e.onkeydown),"onkeyup"in e&&this.listen("keyup",e.onkeyup),"onenter"in e&&this.listen("enter",e.onenter),"onchange"in e&&this.listen("change",e.onchange),this.listen("create",function(e){this.doms={input:this.find("@input")};var t=this.doms.input;this.model.get("placeholder")&&(this.placeholder=(new r.Placeholder({text:this.model.get("placeholder")})).join(this).render(this)),this.model.get("width")&&(t.style.width=this.model.get("width")+"px"),this.model.get("height")&&(t.style.height=this.model.get("height")+"px"),this.model.get("value")&&this.setValue(this.model.get("value")),this.model.get("maxlength")&&t.setAttribute("maxlength",this.model.get("maxlength"))}),this.listen("disable",function(){this.doms.input.disabled=!0}),this.listen("resume",function(){this.doms.input.disabled=!1})},{_getData:function(e){return{width:e.width,height:e.height,placeholder:e.placeholder,maxlength:e.maxlength||e.maxLength,value:e.value||"",type:e.type||"text"}},_baseClassName:"w-input",_template:'<div class="w-input"><input class="w-input-input" data-pro="input" type="{{type}}" /></div>',_events:{"@input/focus":"focus","@input/blur":"blur","@input/keypress":function(e,t){this.fire("keypress",t.keyCode,t),t.keyCode==13&&this.fire("enter",t)},"@input/keydown":function(e,t){this.fire("keydown",t.keyCode,t)},"@input/keyup":function(e,t){this.fire("keyup",t.keyCode,t)},"@input/change":function(e){this.fire("change",e.value)}},Tips:n.extend({_getData:function(e){return{text:e.text,error:e.error,success:e.success}},_template:'<div class="w-input-tips{{#error}} txt-err{{/error}}{{#success}} txt-suc{{/success}}">{{{text}}}</div>'}),Placeholder:n.extend(function(e){this.listen("create",function(){this.listen(this.getParent(),"change",function(){this.getParent().getValue()?this.hide():this.show()}),this.listen(this.getParent(),"focus",function(){this.hide()}),this.listen(this.getParent(),"blur",function(){this.getParent().getValue()||this.show()})})},{_getData:function(e){return{text:e.text}},_template:'<span class="w-input-placeholder">{{{text}}}</span>',_events:{"@":function(){this.getParent().focus()}}})},{select:function(){this.doms.input.select()},focus:function(){this.doms.input.focus(),this.fire("focus")},success:function(e){var t=this.constructor;this.addClass(t.getClassName("suc")),this.__success=!0,this.__error=!1,this.fire("success"),e&&this.showTips(e)},error:function(e){var t=this.constructor;this.addClass(t.getClassName("err")),this.__error=!0,this.__success=!1,this.fire("error"),e&&this.showTips(e)},normal:function(){var e=this.constructor;this.removeClass(e.getClassName("err")),this.removeClass(e.getClassName("suc")),this.__error=!1,this.__success=!1,this.fire("normal"),this.hideTips()},blur:function(){this.doms.input.blur(),this.fire("blur")},setValue:function(e){this.doms.input.value=e,this.fire("change",e)},getValue:function(){return this.doms.input.value},clear:function(){this.setValue("")},showTips:function(e,t){var n=t=="suc"||this.__success,i=t=="err"||this.__error,s={text:e,success:n,error:i};this.tips?this.tips.update(s):this.tips=(new r.Tips(s)).render(this.dom.parentNode)},hideTips:function(){this.tips&&(this.tips.destroy(),this.tips=null,delete this.tips)}});return r}),define("component/select",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Select=n.extend(function(e){"onchange"in e&&this.listen("change",e.onchange)},{_getData:function(e){return{items:e.options||e.items}},_template:'<select class="w-select">						{{#items}}						<option value="{{value}}">{{text}}</option>						{{/items}}					</select>',_events:{"@/change":function(e){this.fire("change",e.value)}}},{getValue:function(){return this.dom.value},getIndex:function(){return this.dom.selectedIndex},setIndex:function(e){var t=this.dom;return t.selectedIndex=e,this.fire("change",t.value),e},setValue:function(e){var t=this.model.get("items");for(var n=0,r=t.length;n<r;n++)if(t[n].value===e){this.setIndex(n);break}}});return r}),define("common/cookie",["require","jquery"],function(e){function r(){n._document=document}function i(e,r,i,s,o){function d(e){var t=e.substring(0,1),n=e.substring(1,e.length)-0;if(t=="s")return n*1e3;if(t=="h")return n*60*60*1e3;if(t=="d")return n*24*60*60*1e3}var u=e,a=r,f=i?d(i):0,l=s||"/",c=o;if(!u)return;var h=new Date,p="";f&&(h.setTime(h.getTime()+f),p=";expires="+h.toGMTString()),n._document.cookie=encodeURIComponent(t.trim(u))+"="+encodeURIComponent(a)+p+(l?";path="+l:"")+(c?";domain="+c:"")}function s(e){var r=e,i="";if(!r)return i;var s=n._document.cookie;if(!t.trim(s))return i;var o="(^| |;)"+encodeURIComponent(t.trim(r))+"="+"([^;]*)"+"(;|$)",u=new RegExp(o),a=s.match(u);return a&&(i=decodeURIComponent(a[2])),i}function o(e,r,i){var s=e;if(!s)return;var o=r||"/",u=i,a=new Date;a.setTime(a.getTime()+ -1);var f=";expires="+a.toGMTString();n._document.cookie=encodeURIComponent(t.trim(s))+"="+f+(o?";path="+o:"")+(u?";domain="+u:"")}var t=e("jquery"),n={_document:null,_init:r,set:i,get:s,del:o};return n._init(),n}),define("common/location",["require","pro","jquery"],function(e){function i(e,t,n){function a(e,t){return e.indexOf("?"+t)>-1||e.indexOf("&"+t)>-1}t=t||window.location.href;var r=t.split("#"),i=r[0],s=i.indexOf("?")>-1?"&":"?";if(typeof e=="string"){var o=e.charAt(0);e=o==="?"||o==="&"?e.slice(1):e,i+=s+e}else for(var u in e)a(i,u)?n||(i=i.replace(new RegExp(u+"="+"[^&#]*"),u+"="+e[u])):(i+=s+u+"="+e[u],s="&");return r[0]=i,r.join("#")}function s(e,t){return this.getParameters(t)[e]}function o(e){e=e||window.location.href;var t=this._paramCache,r=e.replace(/(#.+)/g,"");if(t[r])return t[r];var i=n.trim(this._parse(e).query),s=i?i.split("&"):[],o,u={};if(s.length>0){for(var a=0,f=s.length;a<f;a++)o=/([^=]+)=([^=]*)/.exec(s[a]),o&&(u[o[1]]=o[2]);t[r]=u}return u}function u(e){var t=this._parse(e).hostname.split(".");return t.length<2?"":t.reverse().slice(0,2).reverse().join(".")}function a(e){var t=this._parse(e).hash;return t=!!t&&t.length>0?t.slice(1):"",t}function f(e,t){var n=this.getHash(t),r=n.split("&"),i,s="";if(r.length>0)for(var o=0,u=r.length;o<u;o++){i=/([^=]+)=([^=]*)/.exec(r[o]);if(i[1]==e)return s=i[2],s}return s}function l(e){e=e||window.location.href;var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||window.location.host,port:"0"===t.port||""===t.port?window.location.port:t.port,hash:t.hash,hostname:t.hostname||window.location.hostname,pathname:t.pathname.charAt(0)!=="/"?"/"+t.pathname:t.pathname,protocol:!t.protocol||":"===t.protocol?location.protocol:t.protocol,search:t.search,query:t.search.slice(1)}}var t=e("pro"),n=e("jquery"),r=t.Base.extend({_paramCache:{},_parse:l,addParam:i,getParam:s,getDomain:u,getParameters:o,getHash:a,getHashValue:f});return r}),define("common/login",["require","jquery","pro","component/msgbox","component/input","component/select","common/cookie","common/location"],function(e){function f(e){var n=this,s=e||window.location.href;n.url=s;if(G.isLogin===1)return;var a=encodeURIComponent(s),f=['<div class="w-form">','<div class="w-form-item">','<i class="ico ico-username"></i>','<div class="w-form-cont" id="loginForm_nameIpt" title="请输入帐号">',"</div>","</div>",'<div class="w-form-item">','<i class="ico ico-password"></i>','<div class="w-form-cont" id="loginForm_passIpt" title="请输入密码">',"</div>","</div>",'<button class="w-button w-button-main m-login-btn" data-pro="ok" style="width:100%"><span>登&nbsp;&nbsp;录</span></button>',"</div>",'<div class="m-login-ext f-clear">','<a style="float:left" href="http://reg.email.163.com/unireg/call.do?cmd=register.entrance&from=one" target="_blank">马上注册</a>',"</div>",'<div class="m-login-extLogin">','<div class="hd"><span>第三方登录</span></div>','<div class="bd">','<a class="ico ico-thirdLogin ico-thirdLogin-qq" title="QQ帐号登录" href="http://reg.163.com/outerLogin/oauth2/connect.do?target=1&product=mail_one&url='+a+"&url2="+a+'"></a>','<a class="ico ico-thirdLogin ico-thirdLogin-weixin" title="微信帐号登录" href="http://reg.163.com/outerLogin/oauth2/connect.do?target=13&product=mail_one&url='+a+"&url2="+a+'"></a>','<a class="ico ico-thirdLogin ico-thirdLogin-weibo" title="微博帐号登录" href="http://reg.163.com/outerLogin/oauth2/connect.do?target=3&product=mail_one&url='+a+"&url2="+a+'"></a>',"</div>","</div>",G.isNTES&&G.isNTES==1?'<div class="m-login-netease" style="text-align: center;margin-top: 10px;"><a href="http://1.163.com/wy/" target="_blank">网易员工帐号登录</a></div>':"",'<form action="https://reg.163.com/logins.jsp" method="post" id="loginForm" style="display:none;">','<input id="loginForm_username" type="hidden" name="username" value="">','<input id="loginForm_password" type="hidden" name="password" value="">','<input id="loginForm_product" type="hidden" name="product" value="mail163">','<input id="loginForm_url" type="hidden" name="url" value="">','<input id="loginForm_savelogin" type="hidden" name="savelogin" value="">',"</form>"].join("");r.show({className:"m-login",header:"请使用网易邮箱帐号登录",text:f,ok:!1,oncreate:function(){var e=this,r=this.find("#loginForm_nameIpt"),s=(new i({placeholder:"网易邮箱",attr:{tabindex:1}})).render(r).join(this),o=(new i({type:"password",placeholder:"密码",attr:{tabindex:2}})).render(this.find("#loginForm_passIpt")).join(this);this.pass=o,this.user=s,this.user.listen("keyup",function(e,r){var i=t.trim(this.getValue());i=i.replace(/(\s*)/g,"");if(i){var s=i.split("@"),o="";s.length>1&&(i=s[0],o=s[1]),n.showAuto(i,o)}else n.hideAuto()}),this.user.listen("focus",function(e,r){var i=t.trim(this.getValue());i=i.replace(/(\s*)/g,"");if(i){var s=i.split("@"),o="";s.length>1&&(i=s[0],o=s[1]),n.showAuto(i,o)}else n.hideAuto()}),t(document).on("mouseover","#autoCompleteList .item",function(){t("#autoCompleteList .item").removeClass("hover"),t(this).addClass("hover"),n.sActByHover=t(this).html()}),this.user.listen("blur",function(e,r){var i=this.getValue().split("@");n.hideAuto();var s=t.trim(i[0]),o=t.trim(i[1]);this.hideTips(),s!==""&&(n.sActByHover!==""?(this.setValue(n.sActByHover),i=n.sActByHover.split("@"),s=t.trim(i[0]),o=t.trim(i[1])):o==""?o="163.com":(o=="corp.netease.com"||o=="yixin.im"||o=="mesg.corp.netease.com")&&this.showTips('<strong class="txt-err">网易员工专场，请<a href="http://1.163.com/wy/">点击这里进入</a></strong>')),o&&(/^\s*1\s*6\s*3\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(o)&&this.setValue(s+"@163.com"),/^\s*1\s*2\s*6\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(o)&&this.setValue(s+"@126.com"),/^\s*y\s*e\s*a\s*h\s*(|\.|\.\s*n|\.\s*n\s*e|\.\s*n\s*e\s*t)\s*$/i.test(o)&&this.setValue(s+"@yeah.net"),/^\s*v\s*i\s*p\s*\.\s*1\s*6\s*3\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(o)&&this.setValue(s+"@vip.163.com"),/^\s*v\s*i\s*p\s*\.\s*1\s*2\s*6\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(o)&&this.setValue(s+"@vip.126.com"),/^\s*1\s*8\s*8\s*(|\.|\.\s*c|\.\s*c\s*o|\.\s*c\s*o\s*m)\s*$/i.test(o)&&this.setValue(s+"@188.com"))}),this.pass.listen("keydown",function(t,r){r.keyCode==13&&n.submit.apply(e)})},onafterrender:function(){this.user.focus();var e=t(this.user.dom),r="",i=u.getParam("account");i?r=i:r=o.get("lastlogin"),n.locate(e),t(window).resize(function(){setTimeout(function(){n.locate(e)},10)});var s,a,f;r&&(f=r.split("@"),s=f[0],a=f[1],this.user.setValue(r),this.domain.setValue(a),this.pass.focus())},onok:n.submit,onclose:function(){n.hideAuto()}})}function l(e,t){function f(e){return e=e.replace(/</g,""),e=e.replace(/>/g,""),e=e.replace(/'/g,""),e=e.replace(/"/g,""),e}var n=this;n.sActByHover="";var r=n.getSimilarDomain(t),i={user:e,doamins:r},s=[];if(r.length>0){n.isAutoShow=!0;for(var o=0;o<r.length;o++){var t=r[o],u="",a=e+"@"+t;a=f(a),o===0&&(u="hover",n.sActByHover=a),s.push('<a class="item '+u+'" href="javascript:void(0);" title="'+a+'" >'+a+"</a>")}n.list.html(s.join("")).show(),n.list.css("height","auto"),setTimeout(function(){n.maxHeight&&n.list.height()>n.maxHeight&&n.list.css("height",n.maxHeight)},0)}else n.hideAuto()}function c(){var e=this}function h(){var e=this,t=e.list.find("a.hover");debugger;if(t.length==0)e.list.find("a").first().addClass("hover");else{t.removeClass("hover");debugger;var n=t.next();n.length==0?e.list.find("a").first().addClass("hover"):n.addClass("hover")}}function p(){var e=this;e.isAutoShow=!1,e.list!=null&&e.list.hide()}function d(e){var n=this,r=["163.com","126.com","yeah.net","vip.163.com","vip.126.com","188.com","gmail.com","sina.com","qq.com","yahoo.com"],i=[];return t.each(r,function(t,n){n.indexOf(e)>-1&&i.push(n)}),i}function v(e){var n=this,r=e.offset(),i=r.left,s=r.top+e.height();n.list||(t(document.body).append('<div id="autoCompleteList" style="display:none;" class="m-autoComplete"></div>'),n.list=t("#autoCompleteList")),n.list.css({width:e.width()-2,left:i,top:s-1}),n.maxHeight=t(window).height()-s-1-10;var o=/msie 6/i.test(navigator.userAgent);o&&n.list.css({position:"absolute"})}function m(){var e=t.trim(this.user.getValue());this.user.setValue(e);if(e.indexOf("corp.netease.com")>0||e.indexOf("yixin.im")>0||e.indexOf("mesg.corp.netease.com")>0)return this.user.focus(),!1;var n=t.trim(this.pass.getValue());return this.pass.setValue(n),e==""?(this.user.showTips("帐号不能为空"),this.user.focus(),this.user.listen("keydown",function(){this.hideTips()})):n==""?(this.pass.showTips("密码不能为空"),this.pass.focus(),this.pass.listen("keydown",function(){this.hideTips()})):(o.set("lastlogin",e,"d30"),a.login(e,n)),!1}function g(e,n){var r=this,i=r.url;if(!e||!n)return;return t("#loginForm_username").val(e),t("#loginForm_password").val(n),t("#loginForm_url").val(i),t("#loginForm").submit(),!1}var t=e("jquery"),n=e("pro"),r=e("component/msgbox"),i=e("component/input"),s=e("component/select"),o=e("common/cookie"),u=e("common/location"),a=function(){};return t.extend(a,{isAutoShow:!1,url:"",input:{},maxHeight:null,list:null,sActByHover:"",show:f,login:g,submit:m,getSimilarDomain:d,showAuto:l,hideAuto:p,up:c,down:h,locate:v}),a}),define("common/dataaction",["require","pro","jquery","common/login","common/cookie"],function(e){function o(e){var n=this.constructor;e=e||{},this.__api={},this.__handlers={},t.mix(this.__api,n.api),t.mix(this.__handlers,n.handlers),"api"in e&&t.mix(this.__api,e.api),"handlers"in e&&t.mix(this.__handlers,e.handlers),"onsuccess"in e&&this.listen("success",e.onsuccess),"onerror"in e&&this.listen("error",e.onerror);if("listeners"in e){var r=e.listeners;for(var i in r)this.listen(i,r[i])}}function u(){var e=this.object=this.object||new this;return e.jsonp.apply(e,arguments)}function a(){var e=this.object=this.object||new this;return e.ajax.apply(e,arguments)}function f(e,t,n,r){var i=this,s=this.getApi(e,!0),o=s.url;t=t||{},t.t=(new Date).getTime();var u="DataAction_jsonp_callback_"+t.t;t.callback=u;var a=[];for(var f in t)a.push(f+"="+t[f]);var l="?"+a.join("&");window[u]=function(){n&&n.call(i),n=null,i=null,window[u]=null,delete window[u]};var c=document.createElement("script");c.src=o+l,c.onerror=function(){r&&r.call(i)},document.body.appendChild(c)}function l(e,t,s,o,u){function d(t){f.__handlers[e]&&f.__handlers[e].call(f,t),s&&s.call(f,t),f.fire("ajaxsuccess",e,t),f.fire("ajaxsuccess:"+e,t),t&&t.code!==undefined&&(t.code=t.code-0,f.fire(e,t.code,t.result),f.fire(e+":"+t.code,t.result),t.code===0?f.fire("success:"+e,t.result):t.code===-1?(r.show(),f.fire("error:"+e,t.code,t.result),f.fire("error:"+e+":"+t.code,t.result)):(f.fire("error:"+e,t.code,t.result),f.fire("error:"+e+":"+t.code,t.result)))}function v(t){o&&o.call(f,t),f.fire("ajaxerror",e,t),f.fire("ajaxerror:"+e,t)}var a=this.Class,f=this,l=this.getApi(e,!0),c=l.type,h=l.url,p=l.cache;return t=t||{},p||(t.t="t"in t?t.t:(new Date).getTime()),t.token="token"in t?t.token:i.get("OTOKEN"),n.ajax({url:h,data:t,type:c,async:!u,dataType:"json",success:d,error:v}),this}function c(e,n,r,i){var s=this.getApi(e);e=s.url;for(var o in n)n[o]===undefined?delete n[o]:n[o]===null&&(n[o]="");r&&(window.__dataActionCallbacks=this.callbacks=this.callbacks||{},this.callbacks[r.name]=r.handler);var u="xpost-form",a="xpost-target",f=t.$(u),l=document.body,c=document.createElement("form");f&&f.parentNode.removeChild(f),c.id=u,c.action=e,c.target=i||a,c.method="POST",c.style.display="none",c.innerHTML="";for(var h in n){var p=document.createElement("input");p.type="hidden",p.name=h,p.value=n[h],c.appendChild(p)}if(!i){var d=t.$(a),v=null;d&&d.parentNode.removeChild(d);try{v=document.createElement("<iframe name="+a+">")}catch(m){v=document.createElement("iframe")}v.id=a,v.name=a,v.style.display="none",t.$(a)||l.appendChild(v)}l.appendChild(c),c.submit()}function h(e,t){var n=this.constructor,r=/^(post|get)\:/,i=/(:cache)$/,s=/^\//,o=/https?\:\/\//.test(e);o||(e=this.__api[e]||e);var u=r.test(e)?e.match(r)[1]:"get",a=i.test(e);return e=e.replace(r,""),e=e.replace(i,""),!o&&t&&n.isLocal&&(e=e.replace(/\.do$/,".mo")),s.test(e)&&(e=e.replace(s,"")),{url:(o?"":G.host+"/")+e,type:u,cache:a}}var t=e("pro"),n=e("jquery"),r=e("common/login"),i=e("common/cookie"),s=t.Base.extend(o,{rawAjax:n.ajax,isLocal:window.location.port=="8081",api:{},jsonp:u,ajax:a},{rawAjax:n.ajax,jsonp:f,ajax:l,xpost:c,getApi:h});return s}),define("module/cart/cartaction",["require","jquery","pro","common/dataaction","common/login","common/cookie"],function(e){function u(e,t,n){this.ajax("query",{gid:e},t,n)}function a(e,t,n){if(G.isLogin){var r=s.get("cart");if(r){var i=0,o=r.split(","),u=o.length;for(var a=0,f=u;a<f;a++){var l=o[a].split(":");this.add(l[0],l[1],l[2],l[3],function(r){i++,i>=u&&(t&&t.call(this,r),s.del("cart"),this.get(e,t,n))},function(r){i++,i>=u&&(t&&t.call(this,r),s.del("cart"),this.get(e,t,n))})}}else this.ajax("get",e,function(e){switch(e.code){case 0:t&&t.call(this,e.result)}},n)}else{var o=[],r=s.get("cart"),c=[];if(!r){t&&t.call(this,[]);return}o=r.split(",");for(var a=0,f=o.length;a<f;a++){var l=o[a].split(":");c.push(l[0]),o[a]={id:l[0],gid:l[0],period:l[1],num:l[2]-0}}this.query(c.join(","),function(e){if(e.code==0){for(var n=0,r=o.length;n<r;n++){var i=o[n],s=e.result[n];i.name=s.gname,i.gpic=s.gpic}t&&t.call(this,o)}})}}function f(e,t,n,r,s){G.isLogin?this.xpost("buy",{gid:e,num:t||1,regularBuy:n||1,isFreeCoin:r,period:s},null,"_self"):i.show()}function l(e,t,n){this.ajax("batchAdd",{goods:e,token:s.get("OTOKEN")},function(e){e.code==0?t&&t.call(this,e.result):e.code==-1?i.show():n&&n.call(this,e.code)},n)}function c(e,t,n,r,o,u){n=n||1,r=r||1;if(G.isLogin)this.ajax("add",{id:e,period:t,num:n,regularBuy:r,token:s.get("OTOKEN")},function(e){e.code==0?o&&o.call(this,e.result):e.code==-1?i.show():u&&u.call(this,e.code)},u);else{var a=s.get("cart")||"",f=new RegExp("("+e+"):(\\d+):(\\d+)(?::(\\d+))?(?=,|$)");f.test(a)?a=a.replace(f,function(e,t,i,s){var o=s-0;return[t,i,o+n,r].join(":")}):a+=(a?",":"")+[e,t,n,r].join(":"),s.set("cart",a),this.get(null,function(e){o&&o.call(this,e)})}}function h(e,t,n){if(G.isLogin)this.ajax("del",{id:e},function(e){e.code==0&&t&&t.call(this,e.result)},n);else{var r=s.get("cart")||"",i=new RegExp(e+":\\d+:\\d+(?:\\,|$)");i.test(r)&&(r=r.replace(i,""),r=r.replace(/\,$/,""),s.set("cart",r),this.get(null,function(e){t&&t.call(this,e)}))}}function p(e,t,n,r,i){this.ajax("update",{id:e,num:t,regularBuy:n},function(e){switch(e.code-0){case 0:r&&r.call(this,e.result);break;default:i&&i.call(this,e.code)}},i)}function d(e,t,n){this.ajax("submit",{id:e,token:s.get("OTOKEN")},t,n)}function v(e){e?this.xpost("pay",e,null,"_self"):window.location.href=this.getApi("pay").url}function m(e){if(e.code==0){var t=e.result,n=[];for(var r=0,i=t.length;r<i;r++){var s=t[r];n.push({id:s.id,status:s.info.status,gid:s.info.gid,gpic:s.info.goods.gpic,name:s.info.goods.gname,num:s.num,tag:s.info.goods.tag,price:s.info.goods.price,period:s.info.period,totalTimes:s.info.goods.price,existingTimes:s.info.existingTimes,regularBuy:s.regularBuy,regularBuyMax:s.info.goods.regularBuyMax,buyUnit:s.info.goods.buyUnit})}e.result=n}}var t=e("jquery"),n=e("pro"),r=e("common/dataaction"),i=e("common/login"),s=e("common/cookie"),o=r.extend({api:{get:"cart/get.do",query:"goods/query.do",add:"post:cart/add.do",batchAdd:"post:cart/batchAdd.do",del:"post:cart/del.do",update:"post:cart/update.do",submit:"post:cart/submit.do",buy:"post:cart/index.do",pay:"pay/order.do"},handlers:{get:m,add:m,del:m}},{query:u,get:a,buy:f,add:c,batchAdd:l,del:h,update:p,submit:d,pay:v});return o}),define("component/tipslayer",["require","jquery","pro","component/base"],function(e){var t=e("jquery"),n=e("pro"),r=e("component/base"),i=n.Component.TipsLayer=r.extend(function(e){e=e||{},e.delay=e.delay||200,i.current&&i.current.destroy(),i.current=this,this.listen("render",function(n){var r=t(e.ref);n.style.width=e.width?e.width+"px":"auto",n.style.top=r.offset().top-t(n).outerHeight()-10+"px",n.style.left=r.offset().left+r.outerWidth()/2-6+"px"})},{_getData:function(e){return{classname:e.classname||"",title:e.title||"",text:e.text||""}},_template:'<div class="w-tipsLayer {{classname}}">						<i class="ico ico-arrow ico-arrow-tipArr"></i>						{{&text}}					</div>',_listeners:{create:function(){t(this.dom).css({opacity:0})},render:function(){t(this.dom).animate({opacity:1},this.__config.delay)}},show:function(e){if(i.current)return;return(new this(e)).render(document.body),i.current}},{destroy:function(){var e=this;t(this.dom).animate({opacity:0},this.__config.delay,function(){r.prototype.destroy.call(e),i.current=null})}});return i}),define("common/utils",["require","pro","component/tipslayer","component/msgbox"],function(e){function s(e){var t=document.createElement("link"),n=document.getElementsByTagName("head")[0];t.href=e,t.rel="stylesheet",n.appendChild(t)}function o(e){return e=e.replace(/</gi,"&lt;"),e=e.replace(/>/gi,"&gt;"),e=e.replace(/\"/gi,"&quot;"),e=e.replace(/\'/gi,"&apos;"),e}function u(e){var t=0;for(var n=0;n<e.length;n++)e.charCodeAt(n)<0||e.charCodeAt(n)>255?t+=2:t+=1;return t}function a(e,t){var n=e+"";if(n.length<t)for(var r=0,i=t-n.length;r<i;r++)n="0"+n;return n}function f(e){var t=new RegExp("[%~!#$^&*()=|{}':;,\\[\\]<>/?！￥……（）——【】‘；：”“。，、？]"),n="";for(var r=0;r<e.length;r++)n+=e.substr(r,1).replace(t,"");return n}function l(e,t){var n=this,r=0;return t==0?e:(r=e%t,n.getDivisor(t,r))}function c(e){return e.replace(/(^\s*)|(\s*$)/g,"").replace(/(^　*)|(　*$)/g,"")}function h(e,t){var e=e||(new Date).getTime(),n=new Date(e),t=t||"yyyy-MM-dd hh:mm:ss",r={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in r)(new RegExp("("+i+")")).test(t)&&(t=t.replace(RegExp.$1,RegExp.$1.length==1?r[i]:("00"+r[i]).substr((""+r[i]).length)));return t}function p(e){var t="";return e<=36e5?t="不足1小时":e<=864e5?t=Math.ceil(e/36e5)+"小时":t=Math.ceil(e/864e5)+"天",t}function d(e,t){var n=t||160,r,i=e||{},s=i.avatarPrefix;s||(s=G.url+"lib/img/avatar/"),n<=40?r=40:n<=90?r=90:r=160;var o='<img width="'+n+'" height="'+n+'" onerror="this.src=\''+G.url+"lib/img/avatar/"+r+'.jpeg\'" src="'+s+r+'.jpeg" />';return o}function v(e,t){var n="";switch(t){case"s":n=e[0];break;case"m":n=e[1];break;case"l":n=e[2]}return n}function m(e,t,n){var r=t?this.format(e,4):e,i=t?this.format(t||0,6):"",s="/detail/";if(i=="")return G.host+s+e+".html";if(n||i!="")s="/detail/";return G.host+s+e+"-"+t+".html"}function g(e,t,n,r){return G.host+"/list/"+e+"-"+t+"-"+n+"-"+r+".html"}function y(e){return G.host+"/user/index.do?cid="+e}function b(e,t){return e+t+".jpg"}function w(e){var t={"163.com":"http://entry.mail.163.com/coremail/fcg/ntesdoor2","126.com":"http://entry.mail.126.com/cgi/ntesdoor","yeah.net":"http://entry.mail.yeah.net/cgi/ntesdoor","qq.com":"http://mail.qq.com/","gmail.com":"http://mail.google.com/","sina.com":"http://mail.sina.com.cn/","sina.cn":"http://mail.sina.com.cn/","vip.163.com":"http://vip.163.com/","vip.126.com":"http://vip.126.com/","vip.188.com":"http://www.188.com/","188.com":"http://www.188.com/","sohu.com":"http://mail.sohu.com/","tom.com":"http://mail.tom.com/","sogou.com":"http://mail.sogou.com/","139.com":"http://mail.10086.cn/","hotmail.com":"http://www.hotmail.com","live.com":"http://login.live.com/","live.cn":"http://login.live.cn/","live.com.cn":"http://login.live.com.cn","outlook.coom":"http://www.outlook.com/","189.com":"http://webmail16.189.cn/webmail/","yahoo.cn":"http://mail.yahoo.com/","eyou.com":"http://www.eyou.com/","21cn.com":"http://mail.21cn.com/","foxmail.coom":"http://www.foxmail.com/"},n=e.split("@")[1],r=t[n];return r?r:"http://www."+n}function E(e,t){return G.host+"/user/shareAdd.do?gid="+e+"&period="+t}function S(e,t,n){return G.host+"/user/shareDetail.do?cid="+e+"&gid="+t+"&period="+n}function x(e){return e?G.host+"/pay/recharge.do?id="+e:""}function T(e){var t="";switch(e-0){case 0:t="待确认收货地址";break;case 1:t="待发货";break;case 2:t="已发货";break;case 3:t="已收货";break;case 4:t="已过期";break;case 5:t="放弃商品，接受补偿";break;case 6:t="退换货";break;case 7:t="过期弃奖";break;default:t="正在进行~"}return t}function N(e){return G.host+"/cart/index.do?isFreeCoin=false&gid="+(e.gid||0)+"&period="+(e.period||0)+"&num="+(e.num||1)+"&regularBuy="+(e.regularBuy||1)+"&from="+(e.from||"")}function C(){function t(){var e=$Win.width(),t=1200,n=20,r=45;e<t+r*2+n*2?$BackTop.css({right:"20px"}):$BackTop.css({right:($Win.width()-1200)/2-r-20+"px"})}var e=this;if(e._hasShowBackTop)return;e._hasShowBackTop=!0,$Win=$(window),$Body=$(document.body),$Body.append('<a href="javascript:void(0);" title="返回顶部" style="display:none;" id="lkBackToTop" class="w-back-top"><b class="ico ico-top"></b></a>'),$BackTop=$("#lkBackToTop"),t(),$Win.on("resize",function(){t()}),$Win.on("scroll",function(){var e=$Win.scrollTop();e>100?$BackTop.show():$BackTop.hide()}),$BackTop.on("click",function(){$Win.scrollTop(0)})}function k(e){var t=null;e?t=e.find(".ico-questionMark"):t=$(".ico-questionMark"),t.each(function(){var e=$(this),t=e.attr("data-func"),r="",i=null;switch(t){case"remainder":r='<b class="txt-red">余数：</b>指整数除法中，被除数未被除尽部分。<br/>“例如27除以6，商数为4，余数为3”';break;case"regularBuy":r='<b class="txt-red">Tip：</b>由于该用户参与多期此商品夺宝，因此由系统自动为其分配相应数量的夺宝号码。';break;case"137-1460-wrongCode":r="本期夺宝活动，由于开奖时网络异常，导致服务器取到最后50个<br/>参与时间与页面显示的50个参与时间有错位。除了已经产生的中<br/>奖者维持不变，我们还按照页面公示的数字来重新计算获奖号码<br/>（10001888）并补发商品给中奖者。";break;default:r="我不说你也懂的吧~"}e.unbind().hover(function(){i=n.show({ref:e[0],width:e.attr("data-width"),text:r})},function(){i&&i.destroy()})})}function L(){var e=$(".link-helper");e.each(function(){var e=$(this),t=e.attr("data-func");sTitle="",sTips="";switch(t){case"regularBuy":sTitle="如何一次参与多期夺宝？",sTips=['<ul style="padding-left:1.5em;text-indent:-1.5em">','<li style="margin-top:5px;">1、当您选择参与该商品多期夺宝活动后，系统将默认在新一期活动开始时为您自动参与，参与人次每期相同；</li>','<li style="margin-top:5px;">2、系统为您自动参与的夺宝记录IP与您支付夺宝币时的使用的IP一致，参与时间为在新一期夺宝活动开始后，系统为您自动参与该商品的时间；</li>','<li style="margin-top:5px;">3、系统将结合参与时间、参与人次等情况，为您最优参与到各期夺宝活动中；</li>','<li style="margin-top:5px;">4、如果新一期夺宝活动剩余人次小于您希望参与的人次，系统将不会为您参与该期活动，并优先参与该商品的下一期活动，因此可能会出现非连续期数的参与记录；</li>','<li style="margin-top:5px;">5、当您选择参与该商品多期夺宝活动时，需一次性扣除 参与人次 x 参与多期期数 的夺宝币（如参与10期A商品夺宝活动10人次，将需要使用100夺宝币）；</li>','<li style="margin-top:5px;">6、如该商品夺宝活动因故取消（比如商家停产等），系统将会把您剩余的夺宝币退还；</li>','<li style="margin-top:5px;">7、清单中包含有参与多期的商品，将无法使用红包进行减免。</li>',"</ul>"].join("")}e.on("click",function(){r.show({className:"w-msgbox-helper",title:sTitle,text:sTips,ok:!0})})})}function A(e){return navigator.appName.indexOf("Microsoft")!=-1?window[e]:document[e]}var t=e("pro"),n=e("component/tipslayer"),r=e("component/msgbox"),i=t.Base.extend({loadCss:s,encodeHTML:o,stringLen:u,format:a,stripScript:f,getDivisor:l,trim:c,getTimeLeft:p,timeFormat:h,avatar:d,getGoodsImg:v,getGoodsUrl:m,getGoodsListPage:g,getUserPage:y,getShareDetailPage:S,getSharePic:b,getEntry:w,getShareAdd:E,getRecharge:x,getShipStatus:T,goCart:N,initBackTop:C,showQMark:k,showLinkHelper:L,getFlash:A,_hasShowBackTop:!1});return i}),define("module/cart/cartmodel",["require","pro","common/utils"],function(e){var t=e("pro"),n=e("common/utils"),r=t.Model.extend({_data:{id:"",status:0,gid:0,name:"未命名商品",num:0,price:1,period:0,totalTimes:0,existingTimes:0,regularBuy:1,regularBuyMax:1,gpic:[],buyUnit:1,smallPic:function(){return{width:64,height:48,url:n.getGoodsImg(this.gpic,"s")}},middlePic:function(){return{width:200,height:150,url:n.getGoodsImg(this.gpic,"m")}},url:function(){return n.getGoodsUrl(this.gid,this.period)},remainTimes:function(){return this.totalTimes-this.existingTimes}}});return r}),define("module/cart/minicart",["require","pro","module/cart/minicartview","module/cart/cartaction","module/cart/cartmodel","common/login","component/msgbox"],function(e){function a(e){var t=this.constructor;e=e||{},this.list=new t.List,this.action=e.action||new t.Action,this.model=new t.Model,this.view=new t.View({model:this.model}),this.listenEvents()}function f(){var e=this,t=this.view;this.listenOnceTo(this.view,"render",function(){this.refresh()}),this.listen("refresh",function(e){this.list.set(e)}),this.listen(this.list,"change",function(e){this.model.set("count",this.list.getCount()),this.model.set("total",this.getTotal())}),this.listen(this.model,"change:count",function(e){this.view.showBubble(e)}),this.listen(this.list,"replace",function(){this.list.getCount()&&this.list.each(function(e){e.view&&e.view.destroy(),delete e.view}),this.view.update()}),this.listen(this.view,"goclick",function(){this.go(!0)}),this.listen(this.view,"expandcreate",function(t){this.list.each(function(r){var i=this;r.view=(new n.Goods({model:r,listeners:{delclick:function(){e.del(r.get("gid"))}}})).renderTo(t),r.listen("afterchange",function(){r.view.update()})})})}function l(){var e=this;this.action.get(null,function(t){e.fire("refresh",t)})}function c(e){return this.view.render(e),this}function h(e,t){var n=this,r=(this.list.find({gid:e})||[])[0];r&&this.action.del(r.get("id"),function(e){n.list.set(e),t&&t.call(n,oCartModel),n.fire("remove",r),n.fire("refresh",e)})}function p(e,t,n){var r=this;this.action.batchAdd(e,function(){t?t():r.go()},n)}function d(e,n,r){var s=this,u=null;typeof e=="string"?u=new i({gid:e}):t.is("model",e)?u=e:u=new i(e);var a=u.get("gid"),f=u.get("period"),l=u.get("existingTimes"),c=u.get("num"),h=u.get("regularBuy");this.action.add(a,f,c,h,function(e){s.list.set(e),n&&n.call(s,u),s.fire("add",u),s.fire("refresh",e)},function(e){switch(e+""){case"-250":o.show({text:'<p style="text-align:center"><i class="ico ico-err-m"></i> <b>添加失败，该商品剩余人次不足！</b></p>',ok:!0});break;case"-251":o.show({text:'<p style="text-align:center"><i class="ico ico-err-m"></i> <b>您选择的商品当期活动已满员，<br />　　是否立即参加最新一期夺宝？</b></p>',onok:function(){u.set("period",""),s.add(u,n,r)},oncancel:function(){window.location.reload()}});break;default:o.show({text:'<p style="text-align:center"><i class="ico ico-err-m"></i> <b>添加至清单失败，请重试</b></p>',ok:!0})}r&&r.call(s,sCode)})}function v(e){return this.view.dom=e,this.view.render(),this}function m(e){var t=G.host+"/cart/index.do";G.isLogin?e?window.open(t):window.location.href=t:s.show(t)}function g(e,n){var r;t.is("model",e)?r=e:r=new i(e),r.get("isFreeCoin")?this.action.buy(r.get("gid"),r.get("num"),r.get("regularBuy"),!0,r.get("period")):this.add(r,function(){this.go()},n)}function y(){var e=0;return this.list.each(function(t){e+=t.get("num")*t.get("regularBuy")}),e}var t=e("pro"),n=e("module/cart/minicartview"),r=e("module/cart/cartaction"),i=e("module/cart/cartmodel"),s=e("common/login"),o=e("component/msgbox"),u=t.Base.extend(a,{Action:r,View:n,List:t.List.extend({Model:i}),Model:t.Model.extend({_data:{empty:function(){return this.count===0}}})},{__layerHidden:!0,listenEvents:f,refresh:l,render:c,del:h,add:d,batchAdd:p,bind:v,go:m,buy:g,getTotal:y});return u}),define("common/specialsupport",["require","pro","common/dataaction"],function(e){function r(e,t){var n=this._specials[e];n&&n.length>0?this.eachSpecial(t):this.getSpecial(e,function(){this.eachSpecial(t)})}function i(e){var t=this._specials[e||this._defaultModule];return t?t.length:0}function s(r,i){function o(n){function b(){l+c>=f&&i&&i.call(s)}try{s._specialCache=n,s._specialLoaded=!0;var o=s.Class,u={},a=n.result.list,f=a.length,l=0,c=0;for(var h=0;h<f;h++){var p=n.result.list[h],d=p.relateAct,v=s._specialMap[d],m=p.source,g=m=="web"||m=="any";g&&v&&v[r]?e([v.base+v[r]],t.bind(function(e,t,n,i){l++;try{var s=this._specials[r]=this._specials[r]||[];s.push(new i({context:this,rule:t,tag:e,siteName:n.siteName||""}))}catch(o){}b()},s,d,p,v),function(){c++,b()}):c++}b()}catch(y){i&&i.call(s)}}var s=this;this._defaultModule=r,this._specialLoaded?o(this._specialCache):n.ajax("/kpimission/actregu.do:cache",null,o,function(){i&&i.call(s)})}function o(){var e,t;arguments.length==2?(e=arguments[0],t=arguments[1]):(e=this._defaultModule,t=arguments[0]);var n=this._specials[e];if(n&&n.length>0)for(var r=0,i=n.length;r<i;r++){var s=n[r];try{s&&t.call(this,s)}catch(o){}}}var t=e("pro"),n=e("common/dataaction");return{getSpecialCount:i,eachSpecial:o,getSpecial:s,callSpecial:r,_defaultModule:"",_specialCache:{},_specialLoaded:!1,_specials:{},_specialMap:G.specials}}),define("common/countdown",["require","pro"],function(e){function r(e){"now"in e&&(this.__fix=this._now()-e.now),"interval"in e&&(this.interval=e.interval),"expires"in e&&(this.expires=e.expires),"finish"in e?this.finish=e.finish:this.finish=this._now().getTime()+this.expires;if("listeners"in e){var t=e.listeners;for(var n in t)this.listen(n,t[n])}}function i(){return new Date((new Date).getTime()-this.__fix)}function s(e,n){function r(){var t=this._now();this.expires=this.finish-this._now().getTime();var r=new Date(this.finish),i=r.getTime()-t.getTime(),s=parseInt(i/1e3/60/60),o=parseInt(i/1e3/60%60),u=parseInt(i/1e3%60),a=parseInt(i%1e3),f=parseInt(a/10),l={h:s<10?"0"+s:s+"",m:o<10?"0"+o:o+"",s:u<10?"0"+u:u+"",ms:f<10?"0"+f:f+""};e&&e.call(this,l),this.fire("run",l),s<=0&&o<=0&&u<=0&&a<=0&&(n&&n.call(this),this.fire("run",{h:"00",m:"00",s:"00",ms:"00"}),this.fire("finish"),this.stop())}this.__timer=setInterval(t.bind(r,this),this.interval),r.call(this),this.fire("start")}function o(){clearInterval(this.__timer),this.fire("stop")}var t=e("pro"),n=t.Base.extend(r,{},{interval:1e3,expires:6e4,start:s,stop:o,_now:i,__timer:null,__fix:0});return n}),define("common/header",["require","jquery","pro","common/login","common/dataaction","common/utils","component/msgbox","component/input","module/cart/minicart","common/cookie","common/location","common/specialsupport"],function(e){function p(e){var n=this;n.initToolbar(e),n.renderSearchBar(),(!window.PAGENAME||window.PAGENAME!="index")&&n.renderCatlog(),n.renderMenu(),n.setCookie(),n.fixNav(),t("#whatIsThis").bind("click",function(){return n.showPopIntro(),!1});if(!e||!e.bDelay)n.renderMiniCart(),n.showPromot();s.initBackTop()}function d(e){var t=this;if(!e||!e.bDelay)l.getParam("needLogin")==1&&r.show(),t.login(),t.logout(),t.getRewardMsg();t.renderMyDuobao()}function v(e){var n=this;i.ajax("/user/global.do",null,function(r){if(r.code-0==0){var i=r.result,s="";t.extend(G,i),i.isLogin==1?(s=['<a class="m-toolbar-nickname" href="/user/index.do" title="'+(G.mobileMail&&G.mobileMail!=""?G.mobileMail:G.uid)+'">'+G.nickname+"</a>",' <a class="m-toolbar-logout-btn" href="javascript:void(0)">[ 退出 ]</a>'].join(""),t(".m-toolbar-login").append(s),n.logout()):(s=['<a class="m-toolbar-login-btn" href="javascript:void(0)">请登录</a>','<a href="http://reg.email.163.com/unireg/call.do?cmd=register.entrance&from=one" target="_blank">免费注册</a>'].join(""),t(".m-toolbar-login").append(s),n.login()),n.getRewardMsg(),n.renderMiniCart(),e&&e()}})}function m(){var e=t(".m-toolbar-login-btn");e.bind("click",function(){return r.show(),!1})}function g(){var e=t(".m-toolbar-logout-btn");e.bind("click",function(){var e={test:".1.gztest.mail.163.com",release:".1.163.com"},t=e[G.environment];f.del("OST",null,t),f.del("OSA",null,t);var n=t.substr(1);return f.del("OST",null,n),f.del("OSA",null,n),window.location.href="http://reg.163.com/Logout.jsp?username="+G.uid.split("@")[0]+"&url="+encodeURIComponent(G.host),!1})}function y(){if(t(".w-msgbox").length>0)return;o.show({className:"w-msgbox-intro",text:'<h3>什么是一元夺宝？</h3><a class="ruleLink" href="'+G.host+'/helpcenter/1-1.html" target="_blank" title="了解规则">了解规则</a>',ok:!1})}function b(){var e=t(".m-toolbar-myDuobao"),n=t(".m-toolbar-myDuobao-btn"),r=t(".m-toolbar-myDuobao-menu");e.hover(function(){e.addClass("m-toolbar-myDuobao-hover"),r.show()},function(){e.removeClass("m-toolbar-myDuobao-hover"),r.hide()})}function w(){function c(){var r=t(document).scrollTop();r>l?(n==0&&(n=!0,window.PAGENAME&&window.PAGENAME=="index"&&(s.css("height","0px"),o.show(),e.renderCatlog())),i.addClass("fixed"),a.hide(),u.css("z-index",11),f.addClass("w-miniCart-fixed")):(n==1&&(n=!1,window.PAGENAME&&window.PAGENAME=="index"&&(e.nTimeoutId!=0?(clearTimeout(e.nTimeoutId),e.nTimeoutId=0):s.stop(!0,!0),o.removeClass("ico-arrow-white-up").addClass("ico-arrow-white-down"),s.css("height","auto"),o.hide(),e.unbindCatlog())),i.removeClass("fixed"),a.show(),u.css("z-index",2),f.removeClass("w-miniCart-fixed"))}var e=this,n=!1,r=0,i=t(".m-nav"),s=i.find(".m-catlog-wrap"),o=i.find(".m-catlog .ico-arrow"),u=t(".m-header"),a=t(".m-nav-promot"),f=t(".w-miniCart");if(i.length==0)return;var l=i.offset().top;window.PAGENAME&&window.PAGENAME=="index"&&(l=t(".m-index-news").offset().top),c(),t(window).scroll(function(){if(t(document).height()-t(document).scrollTop()-t(window).height()<i.outerHeight()+10)return;c()}),t(window).resize(function(){c()})}function E(){var e=this,n=t(".m-header").find(".w-miniCart").get(0);return e._miniCart=(new a).bind(n),e._miniCart}function S(){function c(){var n=s.stripScript(e._searchInput.getValue()).replace(/\s{2,}/," ");return t.trim(n)==""?(o.show({text:'<p><i class="ico ico-alert-m"></i> 请先输入您要查找的关键字，多个关键词请用空格隔开~</p>',ok:!1}),!1):(a.val(n),r[0].submit(),!1)}var e=this,n=t(".w-search"),r=n.find(".w-search-form"),i=n.find(".w-search-btn"),a=n.find(".w-search-keyword"),f=n.find(".w-search-recKeyWrap"),l=n.find(".w-search-recKey");e._searchInput=(new u({className:"w-search-input",placeholder:"请输入要搜索的商品",maxlength:50,onenter:function(e){c()},onchange:function(){this.getValue()==""?f.show():f.hide()},onkeyup:function(){this.getValue()==""?f.show():f.hide()}})).render(r[0]),i.bind("click",c),f.hover(function(){i.addClass("w-search-btn-hover")},function(){i.removeClass("w-search-btn-hover")})}function x(){function l(e){a=!0,e?o.removeClass("ico-arrow-white-up").addClass("ico-arrow-white-down"):o.removeClass("ico-arrow-white-down").addClass("ico-arrow-white-up"),s.animate({height:e?0:"353px"},u,function(){e?r.removeClass("open"):r.addClass("open"),a=!1})}var e=this,n=t(".m-nav"),r=t(".m-nav .m-catlog"),i=r.find(".m-catlog-hd"),s=r.find(".m-catlog-wrap"),o=i.find(".ico-arrow"),u=300,a=!1,f=0;r.hover(function(){clearTimeout(f),f=setTimeout(function(){if(a)return!1;l(!1)},100)},function(){clearTimeout(f),f=setTimeout(function(){e.nTimeoutId=0,r.hasClass("open")&&l(!0)},300),e.nTimeoutId=f}),i.click(function(){if(a)return!1;r.hasClass("open")?l(!0):l()})}function T(){var e=t(".m-nav .m-catlog"),n=e.find(".m-catlog-hd");e.unbind(),n.unbind()}function N(){function u(){i.ajax("/hd/oneact/validActlist.do",null,function(e){if(e.code-0==0){var i=e.result.list;if(i.length){var u=['{{#bSelected}}<li class="selected">{{/bSelected}}',"{{^bSelected}}<li>{{/bSelected}}",'<a href="{{url}}" data-tag="{{acttag}}" {{#isNew}}data-new="true"{{/isNew}}>{{actname}}</a>',"</li>"].join(""),a="",l=!1,c=!1;for(var h=0,p=i.length;h<p;h++)window.PAGENAME&&i[h].acttag==window.PAGENAME||window.hdId&&i[h].acttag==window.hdId?(l=!0,c=!0):l=!1,i[h].bSelected=l,a+=n.template(u,i[h]);o.empty().append(a),c&&(r.addClass("selected"),s.find(".ico-arrow").addClass("ico-arrow-red-s ico-arrow-red-s-down")),t('[data-new="true"]').each(function(){var e=t(this),n=e.attr("data-tag");f.get("newHD_"+n)||(s.find(".ico-dot").length||s.append('<i class="ico-dot"></i>'),e.find(".ico-dot").length||e.append('<i class="ico-dot"></i>'))})}else o.empty().append('<li style="padding-left:25px;font-size:12px;line-height:30px;color:#ccc;">敬请期待~</li>')}})}var e=t(".m-menu-list"),r=e.find("li.hd"),s=t(".m-menu-hd"),o=t(".m-menu-hd-list");if(!r.length)return;u(),r.bind("mouseover",function(){r.addClass("open"),o.show()}).bind("mouseout",function(){r.removeClass("open"),o.hide()})}function C(e){if(!G.isLogin)return;i.ajax("/user/getNewestReward.do",null,function(t){var r=t.result.prize,i=t.result.hasBonus,s=t.result.wishlist,u={prize:['<div class="w-msgbox-getPrize-wrap">','<p class="period">期号：{{period}}</p>','<p class="name f-txtabb" title="{{gname}}">{{gname}}</p>','<a class="btn" href="{{url}}"'+(e&&e.bBlank?' target="_blank"':"")+">","{{#isVirtual}}立即查看{{/isVirtual}}{{^isVirtual}}立即确认收货地址{{/isVirtual}}","</a>","</div>"].join(""),bonus:'<a class="btn" href="'+G.host+'/user/bonus.do" title="马上去看看"></a>',wishlist:['<div class="w-msgbox-getPrize-wrap">',"<p>获得礼物</p>",'<p class="name f-txtabb" title="{{gname}}">{{gname}}</p>','<a class="btn" href="{{url}}"'+(e&&e.bBlank?' target="_blank"':"")+">","{{#isVirtual}}立即查看{{/isVirtual}}{{^isVirtual}}立即确认收货地址{{/isVirtual}}","</a>","</div>"].join("")};if(r&&r.gid)r.url=G.host+"/user/win.do",r.isVirtual=r.property&&r.property==1?!0:!1,o.show({className:"w-msgbox-special w-msgbox-getPrize",text:n.template(u.prize,r),ok:!1});else if(i)o.show({className:"w-msgbox-special w-msgbox-getBonus",text:u.bonus,ok:!1});else if(s&&s.wid)switch(s.status-0){case 0:o.show({text:'<p style="text-align:center"><b>您的心愿单在指定时间内未完成！</b><br/>'+(s.supporter>0?'<span style="font-size:12px;color:#808080">朋友们支持的款项已转为红包了哦！</span></p>':"</p>"),okText:"立即查看",onok:function(){window.location.href=G.host+"/user/wishlist.do"}});break;case 1:o.show({text:'<p style="text-align:center"><b>您的心愿单即将到期结束，凑单仍未满额！</b><br/><span style="font-size:12px;color:#808080">您可以：赶快叫更多朋友来凑单；自己也可以补足余额实现心愿</span></p>',okText:"立即查看",onok:function(){window.location.href=G.host+"/user/wishlist.do"}});break;case 2:s.url=G.host+"/user/wishDetail.do?wid="+s.wid,s.isVirtual=s.property&&s.property==1?!0:!1,o.show({className:"w-msgbox-special w-msgbox-getPrize w-msgbox-getGift",text:n.template(u.wishlist,s),ok:!1})}})}function k(){var e='<i class="ico-dot"></i>',n=!1,r=!1,s=!1,o=!1;if(!G.isLogin||!t(".m-toolbar-myDuobao").length)return;i.ajax("/user/getRewardMsg.do",null,function(i){if(i.code-0==0){i.result.hasBonus&&(n=!0),i.result.hasPrize&&(r=!0,o=!0),i.result.hasEndedWish&&(s=!0,o=!0);if(n){var u=t(".m-toolbar-myBonus");u.append(e)}o&&t(".m-toolbar-myDuobao").append(e),r&&t(".m-toolbar-myDuobao-menu-win").append(e),s&&t(".m-toolbar-myDuobao-menu-wish").append(e)}})}function L(){if(f.get("from")!="")return;var e=l.getParam("from"),t=l.getParam("kw");e!==undefined&&e!=""&&(f.set("from",e,"h3"),f.set("kw",t||"","h3"))}function A(){c.getSpecial("global",function(){c.eachSpecial("global",function(e){e.init()}),setTimeout(function(){t(".m-header-slogan-link").length==0&&(t("#whatIsThis").show(),t("#whatIsThis").find("img").css("opacity",0).animate({opacity:1},500))},500)})}function O(){G.uid===undefined&&retrun;var e=["@corp.netease.com","@yixin.im","@mesg.corp.netease.com"],n=!1;for(var r=0,i=e.length;r<i;r++)if(G.uid.indexOf(e[r])>0){n=!0;break}if(G.isNTES||G.isLogin==1&&n){var s=['<li class="m-menu-list-item '+(window.PAGENAME&&window.PAGENAME=="netease"?"selected":"")+'"><var>|</var>','<a class="m-menu-list-item-link" href="'+G.host+'/netease/index.do">员工专场</a>',"</li>"].join("");t(".m-menu-list .hd").length?t(".m-menu-list .hd").before(s):t(".m-menu-list").append(s)}}var t=e("jquery"),n=e("pro"),r=e("common/login"),i=e("common/dataaction"),s=e("common/utils"),o=e("component/msgbox"),u=e("component/input"),a=e("module/cart/minicart"),f=e("common/cookie"),l=e("common/location"),c=e("common/specialsupport"),h={init:p,initToolbar:d,getGlobal:v,login:m,logout:g,showPopIntro:y,renderMyDuobao:b,fixNav:w,renderMiniCart:E,renderSearchBar:S,renderCatlog:x,unbindCatlog:T,renderMenu:N,getNewestReward:C,getRewardMsg:k,setCookie:L,showPromot:A,showNetease:O,_miniCart:{},_searchInput:{},_joinNumberInterval:0,nTimeoutId:0};return h}),define("common/json2",[],function(){return typeof JSON!="object"&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return typeof t=="string"?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,s,o=gap,u,a=t[e];a&&typeof a=="object"&&typeof a.toJSON=="function"&&(a=a.toJSON(e)),typeof rep=="function"&&(a=rep.call(t,e,a));switch(typeof a){case"string":return quote(a);case"number":return isFinite(a)?String(a):"null";case"boolean":case"null":return String(a);case"object":if(!a)return"null";gap+=indent,u=[];if(Object.prototype.toString.apply(a)==="[object Array]"){s=a.length;for(n=0;n<s;n+=1)u[n]=str(n,a)||"null";return i=u.length===0?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+o+"]":"["+u.join(",")+"]",gap=o,i}if(rep&&typeof rep=="object"){s=rep.length;for(n=0;n<s;n+=1)typeof rep[n]=="string"&&(r=rep[n],i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i))}else for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(i=str(r,a),i&&u.push(quote(r)+(gap?": ":":")+i));return i=u.length===0?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+o+"}":"{"+u.join(",")+"}",gap=o,i}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx,escapable,gap,indent,meta,rep;typeof JSON.stringify!="function"&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;gap="",indent="";if(typeof n=="number")for(r=0;r<n;r+=1)indent+=" ";else typeof n=="string"&&(indent=n);rep=t;if(!t||typeof t=="function"||typeof t=="object"&&typeof t.length=="number")return str("",{"":e});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&typeof i=="object")for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),r!==undefined?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),JSON}),define("common/log",["require","jquery"],function(e){function n(){var e=location.host,n=!1;$.each(t._white,function(t,r){if(r.test(e))return n=!0,!1}),t._debug=n,typeof console!="undefined"&&(t._console=console)}function r(e,n){if(!t._debug)return;var r=e,i=n||"";if(typeof r=="undefined")return;r+="";if(!r)return;t._console&&t._console.log(i+": "+r)}function i(e){if(!t._debug)return;var e=e;if(typeof e=="undefined")return;t._console&&(e.stack?t._console.error(e.stack):e.message?t._console.error(e.message):t._console.error(e))}$=e("jquery");var t={_console:null,_debug:!1,_white:[new RegExp("^xparkdev4.mail.163.com$"),new RegExp("^1.gztest.mail.163.com$"),new RegExp("^my.1.mail.163.com(|:\\d+)$")],_init:n,log:r,error:i};return t._init(),t}),define("common/lazyload",["require","jquery","pro","common/log"],function(e){function s(e){var n=this,r=e||{},i=window;n.__win=i,n.__doc=i.document;var s=r.container;if(typeof s=="undefined")n.__dom=t(n.__doc.body);else if(s instanceof t)n.__dom=s;else{if(typeof s!="string")return;n.__dom=t("#"+s)}var o=r.dataName||"data-src";n.__dataName=o;var u=r.time-0||200;n.__time=u,r.minWidth&&(n.__minWidth=r.minWidth),r.minHeight&&(n.__minHeight=r.minHeight),n.__domList=n.__dom.find(n.__tag+"["+n.__dataName+"]"),n.__domList.each(function(e,t){var r=t.style,i=r.cssText||"";t.setAttribute("data-cssText",i),r.cssText+=";min-height:"+n.__minHeight+"px;"+"min-width:"+n.__minWidth+"px;"}),n.__initListen(),window.setTimeout(t.proxy(n.__show,n),200),n.fire("afterinit")}function o(){var e=this,n=function(e){return function(){window.setTimeout(function(){e.__show.apply(e)},e.__time)}}(e);e.__handler=n,t(e.__win).on("scroll",e.__handler),t(e.__win).on("resize",e.__handler)}function u(){var e=this;t(e.__win).off("scroll",e.__handler),t(e.__win).off("resize",e.__handler),e.__domList=e.__dom=e.__win=e.__doc=null,n.Base.prototype.destroy.call(e),e=null}function a(){var e=this,t=e.__doc;if(!t)return;var n=parseInt(t.documentElement.clientHeight),r=e.__domList,i=r.length,s,o,u,a,f,l;if(!i)return!1;for(var c=0;c<i;c++){s=r[c];if(s){o=s.getAttribute(e.__dataName),u=s.getBoundingClientRect(),a=parseInt(u.top),f=parseInt(u.bottom);if(o&&a*f<0||a>=0&&f>0&&a<n)s.onload=function(){var e=this.className;this.className=e.replace(/\s*fn-lazyLoading/,""),this.style.cssText=this.getAttribute("data-cssText"),this.removeAttribute("data-cssText")},l=s.className,/\s*fn-lazyLoading\s*/.test(l)||(s.className+=l?" fn-lazyLoading":"fn-lazyLoading"),s.setAttribute("src",o),s.removeAttribute(e.__dataName),r[c]=null}}}var t=e("jquery"),n=e("pro"),r=e("common/log"),i=n.Base.extend(s,{},{__time:null,__dom:null,__dataName:null,__tag:"img",__domList:null,__initListen:o,__win:null,__doc:null,__show:a,__handler:null,__minWidth:40,__minHeight:40,destroy:u});return i}),define("common/adapterview",["require","pro"],function(e){function r(e){this.applySuper(arguments);var t=this.Class;this.list=e.list,this.adapter=e.adapter||this.adapter,this._init()}function i(){var e=this,t=this.list,n=this.__config;this.listen("create",function(){t.each(function(t,n){var r=e.adapter(t,n);r&&r.join(e).render(e)})}),n.bind&&(this.listen(t,"set",function(){this.update()}),this.listen(t,"exclude",function(e){this.getChild(e).destroy()}),this.listen(t,"include",function(t,n){var r=this.getChild(t),i=this.adapter(n,t);r?i.join(e,t).renderBefore(r):i.join(e).render(e)}))}var t=e("pro"),n=t.View.extend(r,null,{adapter:null,_init:i});return n}),define("component/checkbox",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Checkbox=n.extend(function(e){e=e||{},this.checked=!!e.checked,this.model.set({checked:this.checked,text:e.text}),this.listen("disable",function(){this.doms.input.disabled=!0}),this.listen("resume",function(){this.doms.input.disabled=!1}),this.listen("change",function(e){this.model.set("checked",e),this.checked=e}),"onchange"in e&&this.listen("change",e.onchange),this.checked&&this.listen("create",function(){this.check()})},{_baseClassName:"w-checkbox",_template:'<label class="w-checkbox"><input type="checkbox" data-pro="input"{{#checked}} checked{{/checked}} />{{#text}} <span data-pro="text" >{{{text}}}</span>{{/text}}</label>',_doms:{input:"@input",text:"@text"},_events:{"@input":function(e){this.check(e.checked)}}},{check:function(e,t){return e=e===!1?!1:!0,this.doms.input.checked=e,this.checked!==e&&!t&&this.fire("change",e),this.checked=e,this.checked},getChecked:function(){return this.doms.input.checked}});return r}),define("component/numberinput",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.NumberInput=n.extend(function(e){var e=this.__config;this.listen("create",function(){this.step=e.step||1}),this.listen("disable",function(){this.doms.input.setAttribute("disabled","true")}),this.listen("resume",function(){this.doms.input.removeAttribute("disabled")}),this.listen(this.model,"change:value",function(e){this.fire("change",e)}),this.listen("change",e.onchange)},{_template:'<div class="w-number">                        <input class="w-number-input" data-pro="input" value="{{value}}"/>                        <a title="可以长按哦~" class="w-number-btn w-number-btn-plus" data-pro="plus" href="javascript:void(0);">+</a>                        <a title="可以长按哦~" class="w-number-btn w-number-btn-minus" data-pro="minus" href="javascript:void(0);">-</a>                    </div>',_getData:function(e){return{min:"min"in e?e.min:-Infinity,max:"max"in e?e.max:Infinity,value:e.value||0,width:e.width}},_doms:{input:"@input"},_events:{"@plus/mousedown":function(){this.fire("plusclick"),this.__timer=t.delay(function(){this.__timer=setInterval(t.bind(function(){this.fire("plusclick",!0)},this),100)},this,400)},"@minus/mousedown":function(){this.fire("minusclick"),this.__timer=t.delay(function(){this.__timer=setInterval(t.bind(function(){this.fire("minusclick",!0)},this),100)},this,400)},"@plus/mouseup":function(){this.__timer&&(clearTimeout(this.__timer),this.__timer=null,this.fire("change",this.getValue()))},"@minus/mouseup":function(){this.__timer&&(clearTimeout(this.__timer),this.__timer=null,this.fire("change",this.getValue()))},"@plus/mouseout":function(){this.__timer&&(clearTimeout(this.__timer),this.__timer=null,this.fire("change",this.getValue()))},"@minus/mouseout":function(){this.__timer&&(clearTimeout(this.__timer),this.__timer=null,this.fire("change",this.getValue()))},"@input/change":function(e){this.setValue(e.value)},"@input/mouseover":function(e){e.focus(),e.select()}},_listeners:{plusclick:function(e){e?this.silently(function(){this.plus()}):this.plus()},minusclick:function(e){e?this.silently(function(){this.minus()}):this.minus()}},_baseClassName:"w-number"},{setValue:function(e){e=parseInt(e);var t=this.model.get("max"),n=this.model.get("min");if(typeof e=="number"&&!isNaN(e)&&isFinite(e))return this.step>1&&e%this.step!=0&&(e=(Math.floor(e/this.step)+1)*this.step,this.fire("wrongInput")),e>t?e=t:e<n&&(e=n),this.doms.input.value=e,this.model.set("value",e),e;if(isNaN(e)||!isFinite(e))return this.doms.input.value=this.model.get("value"),this.getValue()},getValue:function(){return this.doms.input.value-0},plus:function(){var e=this.getValue();this.setValue(e+this.step),this.fire("plus",e)},minus:function(){var e=this.getValue();this.setValue(e-this.step),this.fire("minus",e)}});return r}),define("component/pager",["require","pro","component/base","component/button"],function(e){var t=e("pro"),n=e("component/base"),r=e("component/button"),i=t.Component.Pager=n.extend(function(e){var n=this.Class;this.list=new t.List,"onchange"in e&&this.listen("change",e.onchange),this.listen("create",function(){var e=this.__config,r=this.model.get("current"),i=this.model.get("href"),s=this.model.get("total"),o=this.model.get("next"),u=this.model.get("prev"),a=null;if(this.model.get("first"))var f=(new n.Button({text:"首页",className:"w-pager-first",subclass:"aside",num:1,disabled:r-1<=0,href:i})).join(this);var l=(new n.Button({text:u,className:"w-pager-prev",subclass:"aside",num:r-1,disabled:r-1<=0,href:i})).join(this),c=(new n.Button({text:o,className:"w-pager-next",subclass:"aside",num:r+1,disabled:r>=s,href:i})).join(this);if(this.model.get("last"))var h=(new n.Button({text:"末页",className:"w-pager-last",subclass:"aside",num:s,disabled:r>=s,href:i})).join(this);f&&f.render(this),l.render(this);if(!e.simple)if(s<=10)for(var p=1,d=s;p<=d;p++){var v=r==p;(new n.Button({text:p,className:v?"w-pager-cur":"",disabled:v,subclass:"aside",num:p,href:i})).join(this).render(this)}else{for(var p=1,d=5;p<=d;p++){var v=r==p,m=(new n.Button({text:p,className:v?"w-pager-cur":"",disabled:v,subclass:"aside",num:p,href:i})).join(this).render(this);v&&(a=m)}var g=(new t.View({html:"<i></i>"})).render(this),h=(new n.Button({text:s,className:r==s?"w-pager-cur":"",disabled:r==s,subclass:"aside",num:s,href:i})).join(this).render(this);s===r&&(a=h);var y=(new n.Button({text:"...",className:"w-pager-ellipsis",subclass:"aside",disabled:!0})).renderBy(g);a||(a=(new n.Button({text:r,className:"w-pager-cur",disabled:!0,subclass:"aside",num:r,href:i})).join(this),r<s-1?(a.renderBefore(y),r>6&&(new n.Button({text:"...",className:"w-pager-ellipsis",subclass:"aside",disabled:!0})).renderBefore(a)):a.renderAfter(y))}c.render(this),h&&h.render(this)})},{_baseClassName:"w-pager",_template:'<div class="w-pager"></div>',_useBuffer:!0,_getData:function(e){return{total:e.total||1,current:e.current||1,href:e.href,prev:e.prev||"&lt;&lt; 上一页",next:e.next||"下一页 &gt;&gt;",first:e.first||!1,last:e.last||!1}},Button:r.extend(function(e){this.model.set({href:t.template(e.href,{num:e.num}),num:e.num}),this.listen("click",function(){var e=this.getParent();if(e){var t=this.model.get("num");e.fire("change",t)}})})});return i}),define("component/table",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Table=n.extend(function(e){var t=this.constructor;this.listen("create",function(e){var n=this.doms.body.getElementsByTagName("tr");for(var r=0,i=n.length;r<i;r++){var s=n[r],o=(new t.Row({dom:s})).join(this),u=s.getElementsByTagName("td");for(var a=0,f=u.length;a<f;a++)var l=u[a],c=(new t.Cell({dom:l})).join(o)}}),this.model.set({caption:e.caption,head:e.head,body:e.body,footer:e.footer,repeat:!!e.repeat,_rows:function(){return(e.body||[]).length},_headCols:function(){var t=e.head||[],n=0;for(var r=0,i=t.length;r<i;r++){var s=t[r].colspan;typeof s!="undefined"&&(n+=s-1),t[r].hidden&&(n-=1)}return t.length+n},_bodyCols:function(){var t=(e.body||[])[0]||[],n=0;for(var r=0,i=t.length;r<i;r++){var s=t[r].colspan;typeof s!="undefined"&&(n+=s-1),t[r].hidden&&(n-=1)}return t.length+n},_cols:function(){return Math.max(this._headCols(),this._bodyCols())},_colIndex:function(){var e=[];for(var t=0,n=this._cols();t<n;t++)e.push(t);return e}})},{_baseClassName:"w-table",_template:'<table class="w-table">						{{#caption}}<caption>{{{caption}}}</caption>{{/caption}}						<colgroup>							{{#_colIndex}}<col class="w-table-col{{.}}"/>{{/_colIndex}}						</colgroup>						<thead>							<tr>{{#head}}<th style="{{#verticalAlign}}vertical-align:{{verticalAlign}};{{/verticalAlign}}{{#align}}text-align:{{align}};{{/align}}{{#hidden}}display:none;{{/hidden}}"{{#className}} class="{{className}}"{{/className}}{{#colspan}} colspan="{{colspan}}"{{/colspan}}>{{{text}}}</th>{{/head}}</tr>						</thead>						<tfoot>							{{#repeat}}<tr>{{#head}}<th{{#className}} class="{{className}}"{{/className}}>{{{text}}}</th>{{/head}}</tr>{{/repeat}}							{{#footer}}<tr><td colspan="{{_cols}}">{{{footer}}}</td></tr>{{/footer}}						</tfoot>						<tbody>							{{#body}}								<tr>									{{#.}}										<td style="{{#verticalAlign}}vertical-align:{{verticalAlign}};{{/verticalAlign}}{{#align}}text-align:{{align}};{{/align}}{{#hidden}}display:none;{{/hidden}}"{{#className}} class="{{className}}"{{/className}}{{#colspan}} colspan="{{colspan}}"{{/colspan}}>{{{text}}}</td>									{{/.}}								</tr>							{{/body}}						</tbody>						</table>',_doms:{head:"thead",foot:"tfoot",body:"tbody"},Row:t.View.extend({Model:t.Model}),Cell:t.View.extend({Model:t.Model})},{addRow:function(e){var t=this.constructor,n=this.doms.body.insertRow(-1),r=(new t.Row({dom:n})).join(this);for(var i=0,s=e.length;i<s;i++){var o=n.insertCell(-1),u=(new t.Cell({dom:o})).join(r),a=e[i];o.innerHTML=typeof a!="object"?a:a.text}this.fire("addrow",n)},removeRow:function(e){var t=this.getChild(e);if(t)t.destroy(),this.fire("removerow",t);else{var n=this.doms.body.deleteRow(e);this.fire("removerow",n)}}});return r}),define("component/tabs",["require","pro","component/base"],function(e){var t=e("pro"),n=e("component/base"),r=t.Component.Tabs=n.extend(function(e){this.itemList=new t.List(e.items),this.listen("beforecreate",function(){this.useBuffer=!0}),this.listen("render",function(n){var i=this,s=this.doms={tab:this.find("@tab"),panel:this.find("@panel")};this.itemList.each(function(n,o){var u=n.get(),a;t.is("dom",u.tab)?a=(new r.Tab({dom:u.tab})).join(i).render():a=(new r.Tab({text:u.tab})).join(i).render(s.tab),t.is("dom",u.panel)?a.panel=(new r.Panel({dom:u.panel})).render().hide():a.panel=(new r.Panel({text:u.panel})).render(s.panel).hide(),a.listen("destroy",function(){this.panel.destroy(),this.panel=null,delete this.panel}),a.listen("click",function(){i.switchTo(this)}),u.onselect&&a.listen("select",u.onselect),u.onunselect&&a.listen("unselect",u.onunselect),u.disabled&&a.disable(),u.selected&&(e.selected=o)}),this.switchTo(e.selected||0)})},{_baseClassName:"w-tabs",_html:'<div class="w-tabs"><div class="w-tabs-tab" data-pro="tab"></div><div class="w-tabs-panel" data-pro="panel"></div></div>',Tab:n.extend({_template:'<div class="w-tabs-tab-item">{{{text}}}</div>',_events:{"@":"click"},_getData:function(e){return{text:e.text}}},{select:function(){this.addClass("w-tabs-tab-item-selected"),this.panel.show(),this.fire("select")},unselect:function(){this.removeClass("w-tabs-tab-item-selected"),this.panel.hide(),this.fire("unselect")}}),Panel:n.extend({_template:'<div class="w-tabs-panel-item">{{{text}}}</div>',_getData:function(e){return{text:e.text}}})},{getPanel:function(e){return(this.getChild(e)||{}).panel},getTab:function(e){return this.getChild(e)},switchTo:function(e){this.each(function(t,n){e===t||e===n?(t.select(),this.fire("switch",n,t)):t.unselect()})}});return r}),define("component/textarea",["require","pro","component/input"],function(e){var t=e("pro"),n=e("component/input"),r=t.Component.Textarea=n.extend({_template:'<div class="w-textarea"><textarea class="w-textarea-input" data-pro="input">{{value}}</textarea></div>'});return r}),define("component/fixedlayer",["require","jquery","pro","component/base","component/button"],function(e){var t=e("jquery"),n=e("pro"),r=e("component/base"),i=e("component/button"),s=n.Component.FixedLayer=r.extend(function(e){e=e||{},s.current&&s.current.destroy(),s.current=this},{_getData:function(e){var t=!!(e.okText||e.onokclick||e.onok||e.ok)&&e.ok!==!1;return{classname:e.classname||"",title:e.title||"",text:e.text||"",promot:e.promot||"",ok:t,footer:e.footer}},_template:'<div class="w-fixedLayer {{classname}}">						<div class="w-fixedLayer-hd">							<a data-pro="close" href="javascript:void(0);" class="w-fixedLayer-close">×</a>						</div>						<div class="w-fixedLayer-bd f-breakword">							{{#title}}<p class="w-fixedLayer-tt">{{&title}}</p>{{/title}}							{{#text}}{{&text}}{{/text}}							{{#promot}}{{&promot}}{{/promot}}							{{#ok}}								<div data-pro="btn" class="w-fixedLayer-btn">{{{footer}}}</div>							{{/ok}}						</div>						<div class="w-fixedLayer-ft"></div>					</div>',_events:{"@ok":"okclick","@close":"closeclick"},_listeners:{create:function(){var e=this,t=this.__config;this.btn=this.find("@btn"),this.model.get("ok")&&(new i({subclass:"main",text:t.okText||"确定",onclick:function(){e.fire("okclick")}})).render(this.btn)},afterrender:function(){var e=this.__config,n=this.dom;this._height=t(n).height(),t(n).css({height:0}),e.pos=e.pos||"right",e.pos=="bottom"?t(n).css({bottom:e.bottom||"0px"}):e.pos=="left"?t(n).css({left:e.left||"0px",bottom:e.bottom||"0px"}):e.pos=="right"&&t(n).css({right:e.right||"0px",bottom:e.bottom||"0px"}),navigator.userAgent.indexOf("MSIE 6.0")>0&&t(window).on("scroll",function(){t(n).css({bottom:"auto",top:t(window).height()+t(window).scrollTop()-t(n).height()-e.bottom+"px"})}),t(n).animate({height:this._height+"px"},500),this.listen("ok",e.onokclick||e.onok),this.listen("close",e.oncloseclick||e.onclose)},okclick:function(){this.fire("ok")!==!1&&this.destroy()},closeclick:function(){this.fire("close")!==!1&&this.destroy()}},show:function(e){return(new this(e)).render(document.body),s.current}},{destroy:function(){var e=this;t(this.dom).animate({height:0},300,function(){r.prototype.destroy.call(e),s.current=null})}});return s}),define("component/intervalscroll",["require","jquery","pro","component/base"],function(e){var t=e("jquery"),n=e("pro"),r=e("component/base"),i=n.Component.IntervalScroll=r.extend(function(e){e=e||{},i.current=this,i.current.interval=null},{_getData:function(e){return{isFresh:e.isFresh===undefined?!1:e.isFresh,classname:e.classname||"",items:e.items||[],line:e.line||1,perLine:e.perLine||1,minLine:e.minLine||5,speed:e.speed||500,gap:e.gap||5e3,defaultTxt:e.defaultTxt||"暂无内容"}},_template:'<ul class="w-intervalScroll {{classname}}">						{{#items}}						<li data-pro="item" class="w-intervalScroll-item">{{&content}}</li>						{{/items}}						{{^items}}{{&defaultTxt}}{{/items}}					</ul>',_doms:{item:"@item"},_listeners:{afterrender:function(){var e=this.__config,n=this.dom,r=t(n),i=t(this.find("@item"));if(!i.length)return;this.model.set("listLength",this.findAll("li").length),this.model.set("lineHeight",i.outerHeight())}}},{scrollUp:function(e){function a(){r.animate({marginTop:0-n.model.get("lineHeight")*s},n.model.get("speed"),function(){for(var e=0,t=u*s;e<t;e++)n.model.get("isFresh")?r.find(".w-intervalScroll-item").eq(0).remove():r.find(".w-intervalScroll-item").eq(0).appendTo(r);r.css("marginTop",0),r.find(".w-intervalScroll-item").length/(u*s)<o+1&&n.fire("runout")})}var n=e||this,r=t(n.dom),i=n.model.get("listLength"),s=n.model.get("line"),o=n.model.get("minLine"),u=n.model.get("perLine");if(i===undefined||i<=o)return;n.interval=setInterval(a,n.model.get("gap")),n.pause(n.scrollUp,n)},scrollDown:function(e){var t=e||this},pause:function(e,n){var r=n||this,i=t(r.dom);i.hover(function(){clearInterval(r.interval)},function(){clearInterval(r.interval),e(n)})}});return i}),define("component/slideshow",["require","jquery","pro","component/base"],function(e){var t=e("jquery"),n=e("pro"),r=e("component/base"),i=n.Component.SlideShow=r.extend(function(e){e=e||{},i.current=this,i.current.frame=0,i.current.interval=null},{_getData:function(e){return{classname:e.classname||"",items:e.items||[],autoPlay:e.autoPlay===undefined?!0:e.autoPlay,hasBtn:e.hasBtn===undefined?!0:e.hasBtn,hasNav:e.hasNav===undefined?!0:e.hasNav,perGroup:e.perGroup||1,speed:e.speed||500,gap:e.gap||5e3,tongJi:e.tongJi||""}},_template:'<div class="w-slide {{classname}}"						<div class="w-slide-wrap">							<ul class="w-slide-wrap-list" data-pro="list">								{{#items}}								<li data-pro="item" class="w-slide-wrap-list-item">{{&content}}</li>								{{/items}}							</ul>						</div>						<div class="w-slide-controller">							{{#hasBtn}}							<div class="w-slide-controller-btn" data-pro="controllerBtn" style="display: none;">                                <a class="prev" data-pro="prev" href="javascript:void(0)"><i class="ico ico-arrow-large ico-arrow-large-l"></i><span class="f-txtHide">{{tongJi}}上一帧</span></a>                                <a class="next" data-pro="next" href="javascript:void(0)"><i class="ico ico-arrow-large ico-arrow-large-r"></i><span class="f-txtHide">{{tongJi}}下一帧</span></a>                            </div>                            {{/hasBtn}}                            {{#hasNav}}                            <div class="w-slide-controller-nav" data-pro="controllerNav"></div>                            {{/hasNav}}						</div>					</div>',_doms:{list:"@list",item:"@item",controllerBtn:"@controllerBtn",controllerNav:"@controllerNav"},_events:{"@next":function(){this.fire("nextclick")},"@prev":function(){this.fire("prevclick")}},_listeners:{afterrender:function(){var e=this,n=e.doms,r=t(e.find("@item")),i=e.findAll("li").length,s=e.model.get("perGroup"),o=1,u=0,a="";if(i<=s)return;e.model.set("listLength",i),e.model.set("group",i/s),o=e.model.get("group"),e.model.set("moveLen",r.outerWidth()*s),u=e.model.get("moveLen"),a=e.model.get("tongJi")||"";if(e.model.get("hasNav")&&o>1){var f="";for(var l=0,c=Math.ceil(o);l<c;l++)f+='<a class="dot'+(l==0?" curr":"")+'" href="javascript:void(0)"><span class="f-txtHide">'+a+"底部导航</span></a>";n.controllerNav.innerHTML=f,n.navs=t(n.controllerNav).find("a"),n.navs.bind("click",function(){e.fire("navclick",this)})}t(n.list).css("width",i*u),t(e.dom).hover(function(){e.fire("pauseslide")},function(){e.fire("startslide")})},startslide:function(){this.start(),this.doms.controllerBtn&&(this.doms.controllerBtn.style.display="none")},pauseslide:function(){this.interval&&(clearInterval(this.interval),this.interval=null),this.doms.controllerBtn&&(this.doms.controllerBtn.style.display="block")},nextclick:function(){this.frame<this.model.get("group")-1?this.frame++:this.frame=0,this.switchTo()},prevclick:function(){this.frame>0?this.frame--:this.frame=this.model.get("group")-1,this.switchTo()},navclick:function(e){var n=t(e).index();if(this.frame==n)return!1;this.frame=n,this.switchTo()}}},{start:function(e){var t=e||this,n=t.model.get("autoPlay"),r=t.model.get("gap");n&&(t.interval&&clearInterval(t.interval),t.interval=setInterval(function(){t.fire("nextclick")},r))},switchTo:function(e){var n=e||this,r=t(n.doms.controllerNav).find("a");r.removeClass("curr"),r.eq(n.frame).addClass("curr"),t(n.doms.list).animate({left:0-n.model.get("moveLen")*n.frame+"px"},n.model.get("speed"),function(){n.start()})}});return i}),define("component/galleryshow",["require","jquery","pro","component/base"],function(e){var t=e("jquery"),n=e("pro"),r=e("component/base"),i=n.Component.GalleryShow=r.extend(function(e){e=e||{},i.current=this,i.current.timeout=0},{_getData:function(e){return{classname:e.classname||"",smallPics:e.smallPics||[],bigPics:e.bigPics||[]}},_template:['<div class="w-gallery {{classname}}">','<div class="w-gallery-fullsize" data-pro="fullsize">','<img width="410" height="380" src="{{bigPics0}}" onerror="this.src=\''+G.url+"lib/img/products/detail_m.jpg'\" />","</div>",'<i class="ico ico-arrow ico-arrow-red ico-arrow-red-up" data-pro="arrow"></i>','<div class="w-gallery-thumbnail">','<ul class="w-gallery-thumbnail-list">',"{{#smallPics}}",'<li data-pro="thumbnail">','<img width="64" height="48" src="{{.}}" src-big="" onerror="this.src=\''+G.url+"lib/img/products/detail_s.jpg'\" />","</li>","{{/smallPics}}","</ul>","</div>","</div>"].join(""),_doms:{arrow:"@arrow",fullsize:"@fullsize",thumbnail:"@thumbnail"},_listeners:{beforerender:function(){this.model.set("bigPics0",this.model.get("bigPics")[0])},afterrender:function(){var e=this,n=e.doms,r=t(e.find("@thumbnail")),s=t(e.find("@arrow")),o=e.findAll("@thumbnail").length,u=r.outerWidth(!0);e.model.set("arrowMoveLen",u);var a=Math.floor((u-s.width())/2);e.model.set("startPos",a),s.css("left",a),r.addClass("selected");if(o<=1)return;t(e.findAll("@thumbnail")).each(function(){var n=t(this),r=n.find("img").attr("src-big");r==""&&n.find("img").attr("src-big",e.model.get("bigPics")[n.index()]),n.hover(function(){var n=t(this);clearTimeout(i.current.timeout),i.current.timeout=setTimeout(function(){e.switchTo(n)},100)},function(){clearTimeout(i.current.timeout)})})}}},{switchTo:function(e){var n=this;t(n.doms.fullsize).find("img").attr("src",e.find("img").attr("src-big")),t(n.doms.arrow).animate({left:n.model.get("startPos")+n.model.get("arrowMoveLen")*e.index()},50,function(){t(n.findAll("@thumbnail")).removeClass("selected"),e.addClass("selected")})}});return i}),define("hd/common/base",["require","pro"],function(e){function n(e){this.tag=e.tag,this.context=e.context,this.rule=e.rule,this.siteName=e.siteName}function r(e){return this.matchByTag(e)||this.matchById(e)}function i(e){var t=new RegExp("(?:^|,)"+this.tag+"(?=,|$)");return t.test(e.get("tag"))}function s(e){var t=new RegExp("(?:^|,)"+e.get("gid")+"(?=,|$)"),n=this.rule.relateDictid.join(",");return t.test(n)}function o(e,t,n,r){var i=this,s=0;return e.each(function(e){if(r||i.match(e)){var o=e.get("num");n&&(o*=e.get("regularBuy"));var u=t||e.get("checked"),a=t||e.get("status")===1,f=t||n||o<=e.get("remainTimes");u&&a&&f&&(s+=o)}}),s}var t=e("pro");return t.Base.extend(n,null,{tag:"",rule:null,context:null,siteName:"",getCount:o,match:r,matchByTag:i,matchById:s})}),define("hd/common/global",["require","jquery","pro","hd/common/base","component/fixedlayer"],function(e){function s(e){var t=this;this.page=e||"",t.setConfig(),t.getConfig()}function o(){}function u(){var e=this;for(var t in e.config){e.config[t].page=e.config[t].page||"";if(this.page==e.config[t].page)switch(t){case"logoBanner":e.renderLogoBanner(e.config[t]);break;case"bottomFloat":e.renderBottomFloat(e.config[t])}}}function a(e){var n=t(".m-header-slogan"),r="";if(t(".m-header-slogan-link").length>0)return;e.link&&e.link!=""?r='<a class="m-header-slogan-link" href="'+e.link+'" target="_blank"><img src="'+e.img+'" /></a>':e.action&&e.action!=null?r='<a class="m-header-slogan-link" href="javascript:void(0)"><img src="'+e.img+'" /></a>':r='<img class="m-header-slogan-link" src="'+e.img+'" />',n.append(r),e.action&&e.action!=null&&t(".m-header-slogan-link").bind("click",function(){return e.action(),!1}),t(".m-header-slogan-link").find("img").css("opacity",0).animate({opacity:1},500)}function f(e){if(this._fixedLayer)return;this._fixedLayer=i.show({pos:"bottom",bottom:0,className:"w-fixedLayer-bottom w-fixedLayer-"+this.tag,text:'<a href="'+e.link+'" target="_blank"><img height="'+e.imgHeight+'" src="'+e.img+'" /></a>'})}var t=e("jquery"),n=e("pro"),r=e("hd/common/base"),i=e("component/fixedlayer");return r.extend(null,{init:s,setConfig:o,getConfig:u,renderLogoBanner:a,renderBottomFloat:f,config:null,_fixedLayer:null})});